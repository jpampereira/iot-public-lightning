CREATE DATABASE "TGC"
    WITH 
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'en_US.utf8'
    LC_CTYPE = 'en_US.utf8'
    CONNECTION LIMIT = -1;

CREATE TABLE IF NOT EXISTS DADOS_EQUIPAMENTOS (
	ID_EQUIPAMENTO SMALLSERIAL PRIMARY KEY,
	LATITUDE CHARACTER VARYING(25) NOT NULL,
	LONGITUDE CHARACTER VARYING(25) NOT NULL,
	STATUS BOOLEAN NOT NULL
);

CREATE TABLE IF NOT EXISTS DADOS_SENSORES_TEMPO_REAL (
	ID_DADO SERIAL PRIMARY KEY,
	ID_EQUIPAMENTO SMALLSERIAL NOT NULL,
	TENSAO REAL NOT NULL,
	CORRENTE REAL NOT NULL,
	LUMINOSIDADE REAL NOT NULL,
	RELE_STATE BOOLEAN NOT NULL,
	HORA_INSERCAO TIMESTAMP NOT NULL,
	FOREIGN KEY (ID_EQUIPAMENTO) REFERENCES DADOS_EQUIPAMENTOS(ID_EQUIPAMENTO)
);

CREATE TABLE IF NOT EXISTS DADOS_SENSORES_HORA (
	ID_DADO SERIAL PRIMARY KEY,
	ID_EQUIPAMENTO SMALLSERIAL NOT NULL,
	MEDIA_TENSAO REAL NOT NULL,
	MEDIA_CORRENTE REAL NOT NULL,
	MEDIA_LUMINOSIDADE REAL NOT NULL,
	MEDIA_POTENCIA REAL NOT NULL,
	HORA_INSERCAO TIMESTAMP NOT NULL,
	FOREIGN KEY (ID_EQUIPAMENTO) REFERENCES DADOS_EQUIPAMENTOS(ID_EQUIPAMENTO)
);

